{
        "SaveName": "",
        "GameMode": "",
        "Date": "",
        "Gravity": 0.5,
        "PlayArea": 0.5,
        "GameType": "",
        "GameComplexity": "",
        "Tags": [],
        "Table": "",
        "Sky": "",
        "Note": "",
        "Rules": "",
        "TabStates": {},
        "ObjectStates": [
          {
            "Name": "Custom_Token",
            "Transform": {
              "posX": -6.676171,
              "posY": 1.06,
              "posZ": 8.140596,
              "rotX": -1.07035142E-07,
              "rotY": -5.59145E-08,
              "rotZ": 3.29649978E-08,
              "scaleX": 5.46,
              "scaleY": 1.0,
              "scaleZ": 5.46
            },
            "Nickname": "Spirit Importer",
            "Description": "Enter the location of the configuration file and press reload.\n\nThen you can choose a spirit on the left by cliking it's button. Thsi will spawn the spirit and its card's ready to play.",
            "GMNotes": "",
            "ColorDiffuse": {
              "r": 1.0,
              "g": 1.0,
              "b": 1.0
            },
            "Locked": false,
            "Grid": true,
            "Snap": true,
            "IgnoreFoW": false,
            "MeasureMovement": false,
            "DragSelectable": true,
            "Autoraise": true,
            "Sticky": true,
            "Tooltip": true,
            "GridProjection": false,
            "HideWhenFaceDown": false,
            "Hands": false,
            "CustomImage": {
              "ImageURL": "https://raw.githubusercontent.com/LokiMidgard/spirit-island-custom-spirits/deploy/spirit-importer/front.png",
              "ImageSecondaryURL": "https://raw.githubusercontent.com/LokiMidgard/spirit-island-custom-spirits/deploy/spirit-importer/back.png",
              "ImageScalar": 1.0,
              "WidthScale": 0.0,
              "CustomToken": {
                "Thickness": 0.2,
                "MergeDistancePixels": 15.0,
                "StandUp": false,
                "Stackable": false
              }
            },
            "LuaScript": "-- lua script that can be added to an object in Tabletop Simulator to load spirits generated with this tool.\nfunction onLoad() LoadData() end\n\nlocal data = nil\nlocal json_url = nil\nfunction LoadData() startLuaCoroutine(self, \"LoadDataCo\") end\n\nfunction LoadDataCo()\n    if (json_url == nil) then\n        local table = self.UI.getXmlTable()\n        while table == nil or table[1] == nil or table[1].children == nil or\n            table[1].children[1] == nil do\n            Wt(0.5)\n            table = self.UI.getXmlTable()\n        end\n        json_url = self.UI.getXmlTable()[1].children[1].value\n    end\n\n    local url = json_url\n    if url == nil then return end\n    local function starts_with(str, start) return str:sub(1, #start) == start end\n\n    if starts_with(url, 'https://') or starts_with(url, 'http://') then\n        local function webRequestCallback(webReturn)\n            data = JSON.decode(webReturn.text)\n            startLuaCoroutine(self, \"HandleSpiritsCo\")\n        end\n\n        WebRequest.get(url, function(a) webRequestCallback(a) end)\n    else\n        broadcastToAll(\n            'Only URLs starting with \"http://\" or \"https://\" ares supported',\n            {r = 1, g = 0, b = 0})\n\n        -- havn't found out a way to open a local file. Propably securety resons...\n        -- local function read_file(path)\n        --     local file = io.open(path, \"rb\") -- r read mode and b binary mode\n        --     if not file then return nil end\n        --     local content = file:read \"*a\" -- *a or *all reads the whole file\n        --     file:close()\n        --     return content\n        -- end\n\n        -- local content = read_file(url)\n        -- data = content\n        -- startLuaCoroutine(self, \"HandleSpiritsCo\")\n    end\n    return 1\nend\n\nfunction UpdateUrl(player, value, id) json_url = value end\n\nfunction HandleSpiritsCo()\n    local loeadedData = data\n    if data == nil then return end\n\n    local ui = self.UI.getXmlTable()\n    local list = {}\n    ui[1].children[3].children[1].children = list\n    ui[1].children[1].value = json_url\n\n    local numberOfEntrys = 0\n\n    local customAssets = UI.getCustomAssets()\n    if customAssets == nil then customAssets = {} end\n\n    for key, value in pairs(loeadedData) do\n\n        local backFace = value[2].CustomDeck[next(value[2].CustomDeck)].BackURL\n        -- backFace = Next(pairs(value[2].CustomDeck))--.value.BackURL\n        local found = false\n        for key2, value2 in pairs(customAssets) do\n            if value2.name == key then\n                found = true\n                value2.url = backFace\n            end\n        end\n        if found == false then\n            customAssets[#customAssets + 1] = {name = key, url = backFace}\n        end\n        numberOfEntrys = numberOfEntrys + 1\n        local currentElement = {\n            tag = \"Panel\",\n            attributes = {\n                childForceExpandHeight = true,\n                childAlignment = \"UpperLeft\",\n                height = 200\n            },\n            children = {\n                {\n                    tag = \"Button\",\n\n                    attributes = {\n                        onClick = \"LoadSpirit\",\n                        id = key,\n                        height = 50,\n                        width = 110,\n                        offsetXY = \"0 75\"\n\n                    },\n                    value = key\n                }, {\n                    tag = \"Image\",\n                    attributes = {\n                        image = key,\n                        type = \"Filled\",\n                        height = 150,\n                        width = 110,\n                        offsetXY = \"0 -25\"\n                    }\n                }\n            }\n        }\n\n        list[#list + 1] = currentElement\n    end\n\n    self.setTable(\"spiritData\", loeadedData)\n    UI.setCustomAssets(customAssets)\n    Wt(0.5)\n    ui[1].children[3].children[1].attributes.height = numberOfEntrys * 200\n\n    self.UI.setXmlTable(ui)\n    print(\"All Spirits loaded\")\n    return 1\nend\n\nfunction LoadSpirit(object_pick, player_color, arg1)\n\n    local pos = self.getPosition()\n    -- the offset is only for the spirit, the power cards look good at there position\n    local offset = {x = 4, y = -1.3}\n    local value = self.getTable(\"spiritData\")[arg1]\n\n    t = {\n        position = {x = pos.x + offset.x, y = pos.y + 3, z = pos.z + offset.y},\n        rotation = {x = 0, y = 180, z = 180},\n        json = JSON.encode(value[1])\n    }\n    t.json = spawnObjectJSON(t)\n    t = {\n        position = {x = pos.x, y = pos.y + 5, z = pos.z},\n        json = JSON.encode(value[2])\n    }\n    spawnObjectJSON(t)\nend\n\nfunction Wt(some)\n    local Time = os.clock() + some\n    while os.clock() < Time do coroutine.yield(0) end\nend\n",
            "LuaScriptState": "",
            "XmlUI": "\n<Panel position=\"0 0 -21\">\n    <InputField id=\"urlFiled\" onEndEdit=\"UpdateUrl\" width=\"500\" offsetXY=\"-60 114\" scale=\"0.7 0.7 1\">https://raw.githubusercontent.com/LokiMidgard/spirit-island-custom-spirits/deploy/tabletop.json</InputField>\n    <Button onClick=\"LoadData\" width=\"100\" height=\"30\" offsetXY=\"203 113\" scale=\"0.7 0.7 1\">Reload</Button>\n    <VerticalScrollView id=\"masters\" offsetXY=\"-173 -23\" height=\"215\" width=\"130\">\n        <VerticalLayout height=\"0\">\n            <!-- Will be filed by the script -->\n        </VerticalLayout>\n    </VerticalScrollView>\n</Panel>",
            "GUID": "4b032b"
          }
        ],
        "LuaScript": "",
        "LuaScriptState": "",
        "XmlUI": "",
        "VersionNumber": ""
      }